# ğŸš€ é›™å®¹å™¨æ•´åˆéƒ¨ç½²æŒ‡å—

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

é€™å€‹å°ˆæ¡ˆç¾åœ¨æ•´åˆäº†å…©å€‹å®¹å™¨ï¼š

1. **FastAPI æ‡‰ç”¨** (`my-blog-project`)
   - ç«¯å£ï¼š8080
   - åŠŸèƒ½ï¼šAPI æœå‹™å’Œéœæ…‹æ–‡ä»¶æœå‹™
   - æŠ€è¡“æ£§ï¼šPython + FastAPI + Uvicorn

2. **Jekyll ç¶²ç«™** (`jekyll-site`)
   - ç«¯å£ï¼š4000
   - åŠŸèƒ½ï¼šéœæ…‹ç¶²ç«™å’Œéƒ¨è½æ ¼
   - æŠ€è¡“æ£§ï¼šRuby + Jekyll + Nginx

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

```
Kubernetes Pod (my-blog-project-multi)
â”œâ”€â”€ å®¹å™¨ 1: FastAPI æ‡‰ç”¨ (fastapi-app)
â”‚   â”œâ”€â”€ ç«¯å£: 8080
â”‚   â”œâ”€â”€ å¥åº·æª¢æŸ¥: /healthz
â”‚   â””â”€â”€ è³‡æºé™åˆ¶: CPU 200m, Memory 256Mi
â”‚
â””â”€â”€ å®¹å™¨ 2: Jekyll ç¶²ç«™ (jekyll-site)
    â”œâ”€â”€ ç«¯å£: 4000
    â”œâ”€â”€ å¥åº·æª¢æŸ¥: /
    â”œâ”€â”€ è³‡æºé™åˆ¶: CPU 300m, Memory 512Mi
    â””â”€â”€ åŒ…å« Nginx åå‘ä»£ç†
```

## ğŸŒ è¨ªå•æ–¹å¼

éƒ¨ç½²å®Œæˆå¾Œï¼Œæ‚¨å¯ä»¥é€šéä»¥ä¸‹æ–¹å¼è¨ªå•ï¼š

- **FastAPI æ‡‰ç”¨**: `http://[NODE-IP]:30080`
- **Jekyll ç¶²ç«™**: `http://[NODE-IP]:30081`

## ğŸ”„ éƒ¨ç½²æµç¨‹

### è‡ªå‹•éƒ¨ç½² (æ¨è–¦)
1. æ¨é€åˆ° `main` åˆ†æ”¯
2. GitHub Actions è‡ªå‹•è§¸ç™¼ CD
3. å»ºç½®å…©å€‹ Docker æ˜ åƒ
4. æ¨é€åˆ° AWS ECR
5. éƒ¨ç½²åˆ° Kubernetes

### æ‰‹å‹•éƒ¨ç½²
```bash
# ä½¿ç”¨å¤šå®¹å™¨éƒ¨ç½²è…³æœ¬
./scripts/deploy-multi.sh [image-tag]

# æˆ–ä½¿ç”¨ Kustomize
kubectl apply -k k8s/kustomization-multi.yaml
```

## ğŸ“ æ–‡ä»¶çµæ§‹

```
my_blog_project/
â”œâ”€â”€ app/                    # FastAPI æ‡‰ç”¨
â”œâ”€â”€ jekyll-site/           # Jekyll ç¶²ç«™ (è¤‡è£½è‡ª jackycsie.github.io)
â”œâ”€â”€ k8s/                   # Kubernetes é…ç½®
â”‚   â”œâ”€â”€ deployment-multi.yaml    # å¤šå®¹å™¨éƒ¨ç½²
â”‚   â”œâ”€â”€ service-multi.yaml       # é›™æœå‹™é…ç½®
â”‚   â””â”€â”€ kustomization-multi.yaml # éƒ¨ç½²ç®¡ç†
â””â”€â”€ scripts/               # éƒ¨ç½²è…³æœ¬
    â””â”€â”€ deploy-multi.sh    # å¤šå®¹å™¨éƒ¨ç½²è…³æœ¬
```

## ğŸ³ Docker æ˜ åƒ

### FastAPI æ‡‰ç”¨
- **å€‰åº«**: `my-blog-project`
- **åŸºç¤æ˜ åƒ**: `python:3.11-slim`
- **ç«¯å£**: 8080

### Jekyll ç¶²ç«™
- **å€‰åº«**: `jekyll-site`
- **åŸºç¤æ˜ åƒ**: `ruby:3.2-slim`
- **ç«¯å£**: 4000
- **åŒ…å«**: Nginx åå‘ä»£ç†

## ğŸ”§ æ•…éšœæ’é™¤

### æª¢æŸ¥å®¹å™¨ç‹€æ…‹
```bash
# æŸ¥çœ‹ Pod ç‹€æ…‹
kubectl get pods -n my-blog-project

# æŸ¥çœ‹å®¹å™¨æ—¥èªŒ
kubectl logs -n my-blog-project -l app=my-blog-project-multi -c fastapi-app
kubectl logs -n my-blog-project -l app=my-blog-project-multi -c jekyll-site

# æŸ¥çœ‹æœå‹™ç‹€æ…‹
kubectl get services -n my-blog-project
```

### å¸¸è¦‹å•é¡Œ
1. **å®¹å™¨å•Ÿå‹•å¤±æ•—**: æª¢æŸ¥å¥åº·æª¢æŸ¥è·¯å¾‘å’Œç«¯å£
2. **æ˜ åƒæ‹‰å–å¤±æ•—**: ç¢ºèª ECR èªè­‰å’Œæ˜ åƒæ¨™ç±¤
3. **æœå‹™ç„¡æ³•è¨ªå•**: æª¢æŸ¥ NodePort é…ç½®å’Œé˜²ç«ç‰†è¨­ç½®

## ğŸ¯ å„ªå‹¢

âœ… **çµ±ä¸€éƒ¨ç½²**: ä¸€å€‹ CD æµç¨‹éƒ¨ç½²å…©å€‹æ‡‰ç”¨  
âœ… **è³‡æºå…±äº«**: å…©å€‹å®¹å™¨å…±äº« Pod è³‡æº  
âœ… **ç°¡åŒ–ç®¡ç†**: çµ±ä¸€çš„å‘½åç©ºé–“å’Œæ¨™ç±¤  
âœ… **éˆæ´»æ“´å±•**: å¯ä»¥ç¨ç«‹èª¿æ•´æ¯å€‹å®¹å™¨çš„è³‡æº  
âœ… **æ•…éšœéš”é›¢**: ä¸€å€‹å®¹å™¨å¤±æ•—ä¸å½±éŸ¿å¦ä¸€å€‹  

## ğŸ“ å¾ŒçºŒæ”¹é€²

- [ ] æ·»åŠ  Ingress é…ç½®ï¼Œä½¿ç”¨åŸŸåè¨ªå•
- [ ] é…ç½® SSL è­‰æ›¸
- [ ] æ·»åŠ ç›£æ§å’Œæ—¥èªŒèšåˆ
- [ ] å¯¦ç¾è—ç¶ éƒ¨ç½²
- [ ] æ·»åŠ è‡ªå‹•æ“´ç¸®å®¹ (HPA)
